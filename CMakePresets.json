{
    "version": 6,
    "configurePresets": [
        {
            "name": "Development",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/Development",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "RelWithDebInfo",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/Development/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/Development/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",

                "OSC_USE_STRICT_COMPILER_FLAGS": "ON"
            }
        },
        {
            "name": "Development-Inlined",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/Development-Inlined",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "RelWithDebInfo",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/Development-Inlined/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/Development-Inlined/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
                "CMAKE_POSITION_INDEPENDENT_CODE": "ON",

                "OSC_USE_STRICT_COMPILER_FLAGS": "ON",
                "OSC_BUILD_OSCAR_INLINE": "ON",
                "OSC_BUILD_OPYNSIM_INLINE": "ON",
                "OPYN_USE_STRICT_COMPILER_FLAGS": "ON",
                "OPYN_PACKAGE": "OFF",
                "OPYN_BUILD_DOCS": "OFF",
                "OPYN_BUILD_PYTHON_BINDINGS": "ON",
                "OPYN_BUILD_TESTING": "ON",
                "OPYN_VENV": "${sourceDir}/.venv",
                "OPYN_BUILD_OPYNSIM_DEBUGGER": "ON"
            }
        },
        {
            "name": "ErrorCheck",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/ErrorCheck",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "RelWithDebInfo",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/ErrorCheck/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/ErrorCheck/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
                "CMAKE_C_COMPILER": "clang",
                "CMAKE_CXX_COMPILER": "clang++",
                "CMAKE_C_FLAGS": "-fsanitize=address -fno-sanitize-recover=all",
                "CMAKE_CXX_FLAGS": "-fsanitize=address -fno-sanitize-recover=all",
                "CMAKE_EXE_LINKER_FLAGS": "-fsanitize=address -rdynamic",
                "CMAKE_CXX_CLANG_TIDY": "clang-tidy",

                "OSC_USE_STRICT_COMPILER_FLAGS": "ON"
            }
        },
        {
            "name": "Debug-Inlined",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/Debug-Inlined",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "Debug",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/Debug-Inlined/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/Debug-Inlined/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
                "CMAKE_POSITION_INDEPENDENT_CODE": "ON",

                "OSC_USE_STRICT_COMPILER_FLAGS": "ON",
                "OPYN_USE_STRICT_COMPILER_FLAGS": "ON",
                "OSC_BUILD_OSCAR_INLINE": "ON",
                "OSC_BUILD_OPYNSIM_INLINE": "ON",
                "OPYN_PACKAGE": "OFF",
                "OPYN_BUILD_DOCS": "OFF",
                "OPYN_BUILD_PYTHON_BINDINGS": "ON",
                "OPYN_BUILD_TESTING": "ON",
                "OPYN_VENV": "${sourceDir}/.venv",
                "OPYN_BUILD_OPYNSIM_DEBUGGER": "ON"
            }
        },
        {
            "name": "RelWithDebInfo",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/RelWithDebInfo",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "RelWithDebInfo",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/RelWithDebInfo/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/RelWithDebInfo/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON"
            }
        },
        {
            "name": "Release",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/Release",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "Release",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/Release/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/Release/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON"
            }
        },
        {
            "name": "Release-MacOS-amd64",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/Release-MacOS-amd64",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "Release",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/Release-MacOS-amd64/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/Release-MacOS-amd64/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
                "CMAKE_OSX_ARCHITECTURES": "x86_64",
                "CMAKE_OSX_DEPLOYMENT_TARGET": "14.5",
                "CMAKE_OSX_SYSROOT": "/Library/Developer/CommandLineTools/SDKs/MacOSX14.5.sdk/"
            }
        },
        {
            "name": "Release-MacOS-arm64",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/Release-MacOS-arm64",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "Release",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/Release-MacOS-arm64/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/Release-MacOS-arm64/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
                "CMAKE_OSX_ARCHITECTURES": "arm64",
                "CMAKE_OSX_DEPLOYMENT_TARGET": "14.5",
                "CMAKE_OSX_SYSROOT": "/Library/Developer/CommandLineTools/SDKs/MacOSX14.5.sdk/"
            }
        },
        {
            "name": "Release-Windows-amd64",
            "generator": "Ninja",
            "binaryDir": "${sourceDir}/build/Release-Windows-amd64",
            "cacheVariables": {
                "CMAKE_BUILD_TYPE": "Release",
                "CMAKE_PREFIX_PATH": "${sourceDir}/build/third_party/Release-Windows-amd64/install",
                "CMAKE_INSTALL_PREFIX": "${sourceDir}/build/Release-Windows-amd64/install",
                "CMAKE_EXPORT_COMPILE_COMMANDS": "ON",
                "CMAKE_SYSTEM_VERSION": "10.0.26100.0"
            }
        }
    ],
    "buildPresets": [
        { "name": "Development",           "configurePreset": "Development"           },
        { "name": "Development-Inlined",   "configurePreset": "Development-Inlined"   },
        { "name": "ErrorCheck",            "configurePreset": "ErrorCheck"            },
        { "name": "Debug-Inlined",         "configurePreset": "Debug-Inlined"         },
        { "name": "RelWithDebInfo",        "configurePreset": "RelWithDebInfo"        },
        { "name": "Release",               "configurePreset": "Release"               },
        { "name": "Release-MacOS-amd64",   "configurePreset": "Release-MacOS-amd64"   },
        { "name": "Release-MacOS-arm64",   "configurePreset": "Release-MacOS-arm64"   },
        { "name": "Release-Windows-amd64", "configurePreset": "Release-Windows-amd64" }
    ],
    "testPresets": [
        {
            "name": "Development",
            "configurePreset": "Development",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"}
        },
        {
            "name": "Development-Inlined",
            "configurePreset": "Development-Inlined",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"}
        },
        {
            "name": "ErrorCheck",
            "configurePreset": "ErrorCheck",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"},
            "environment": {
                "ASAN_OPTIONS": "abort_on_error=1:strict_string_checks=true:malloc_context_size=30:check_initialization_order=false:detect_stack_use_after_return=true:strict_init_order=false",
                "LSAN_OPTIONS": "suppressions=${sourceDir}/scripts/suppressions_lsan.supp",
                "LIBGL_ALWAYS_SOFTWARE": "1"
            }
        },
        {
            "name": "Debug-Inlined",
            "configurePreset": "Debug-Inlined",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"}
        },
        {
            "name": "RelWithDebInfo",
            "configurePreset": "RelWithDebInfo",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"}
        },
        {
            "name": "Release",
            "configurePreset": "Release",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"}
        },
        {
            "name": "Release-MacOS-amd64",
            "configurePreset": "Release-MacOS-amd64",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"}
        },
        {
            "name": "Release-MacOS-arm64",
            "configurePreset": "Release-MacOS-arm64",
            "output": {"outputOnFailure": true},
            "execution": {"noTestsAction": "error"}
        },
        {
            "name": "Release-Windows-amd64",
            "configurePreset": "Release-Windows-amd64",
            "filter": {
                "exclude": {
                    "name": "Graphics|MeshDepthWritingMaterialFixture|MeshNormalVectorsMaterialFixture|ShaderTest|MaterialTest|RegisteredDemoTabsTest|RegisteredOpenSimCreatorTabs|AddComponentPopup|LoadingTab"
                }
            },
            "output": { "outputOnFailure": true },
            "execution": { "noTestsAction": "error" }
        }
    ],
    "packagePresets": [
        { "name": "Release",               "configurePreset": "Release"               },
        { "name": "Release-MacOS-amd64",   "configurePreset": "Release-MacOS-amd64"   },
        { "name": "Release-MacOS-arm64",   "configurePreset": "Release-MacOS-arm64"   },
        { "name": "Release-Windows-amd64", "configurePreset": "Release-Windows-amd64" }
    ],
    "workflowPresets": [
        {
            "name": "Development",
            "steps": [
                { "type": "configure", "name": "Development" },
                { "type": "build",     "name": "Development" }
            ]
        },
        {
            "name": "Development-Inlined",
            "steps": [
                { "type": "configure", "name": "Development-Inlined" },
                { "type": "build",     "name": "Development-Inlined" }
            ]
        },
        {
            "name": "ErrorCheck",
            "steps": [
                { "type": "configure", "name": "ErrorCheck" },
                { "type": "build",     "name": "ErrorCheck" },
                { "type": "test",      "name": "ErrorCheck" }
            ]
        },
        {
            "name": "Debug-Inlined",
            "steps": [
                { "type": "configure", "name": "Debug-Inlined" },
                { "type": "build",     "name": "Debug-Inlined" }
            ]
        },
        {
            "name": "RelWithDebInfo",
            "steps": [
                { "type": "configure", "name": "RelWithDebInfo" },
                { "type": "build",     "name": "RelWithDebInfo" }
            ]
        },
        {
            "name": "Release",
            "steps": [
                { "type": "configure", "name": "Release" },
                { "type": "build",     "name": "Release" },
                { "type": "test",      "name": "Release" },
                { "type": "package",   "name": "Release" }
            ]
        },
        {
            "name": "Release-MacOS-amd64",
            "steps": [
                { "type": "configure", "name": "Release-MacOS-amd64" },
                { "type": "build",     "name": "Release-MacOS-amd64" },
                { "type": "test",      "name": "Release-MacOS-amd64" },
                { "type": "package",   "name": "Release-MacOS-amd64" }
            ]
        },
        {
            "name": "Release-MacOS-arm64",
            "steps": [
                { "type": "configure", "name": "Release-MacOS-arm64" },
                { "type": "build",     "name": "Release-MacOS-arm64" },
                { "type": "test",      "name": "Release-MacOS-arm64" },
                { "type": "package",   "name": "Release-MacOS-arm64" }
            ]
        },
        {
            "name": "Release-Windows-amd64",
            "steps": [
                { "type": "configure", "name": "Release-Windows-amd64" },
                { "type": "build",     "name": "Release-Windows-amd64" },
                { "type": "test",      "name": "Release-Windows-amd64" },
                { "type": "package",   "name": "Release-Windows-amd64" }
            ]
        }
    ]
}
